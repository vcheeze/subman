import{j as e,x as _,r as c,o as oe,v as Y,q as ne,w,P as U,G as se,H as ae,L as z,I as ie}from"./main-Bph0N3Xt.js";import{B}from"./button-Cgi5flwZ.js";import{C as D,a as O,b as S,c as M,d as le}from"./card-DVnSgC2R.js";import{D as ce,a as de,b as ue,c as G}from"./dropdown-menu-Cw2HW3Uv.js";import{d as q,b as me,u as pe,e as xe,A as he,P as fe,j as ge,D as ve,C as be,k as je}from"./index-BR6ZRV6V.js";import{P as we}from"./plus-BZCF4yPs.js";import{c as ye}from"./createLucideIcon-DEV_LwaW.js";import{m as Ne}from"./proxy-WjaWkN46.js";import"./index-B4uYwTLQ.js";/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Ce=ye("ellipsis",Te);function Ee(t){return t===void 0?{BS_PRIVATE_NESTED_SOME_NONE:0}:t!==null&&t.BS_PRIVATE_NESTED_SOME_NONE!==void 0?{BS_PRIVATE_NESTED_SOME_NONE:t.BS_PRIVATE_NESTED_SOME_NONE+1|0}:t}function Pe(t,o){if(o in t)return Ee(t[o])}function _e(t,o,r){for(var s=o,n=0,l=t.length;n<l;++n)s=r(s,t[n]);return s}function V(t,o){return _e(t,{},function(r,s){var n=o(s),l=Pe(r,n);return l!==void 0?l.push(s):r[n]=[s],r})}function Re(){if(arguments.length===1){const t=arguments;return function(r){return V(r,t[0])}}return V(arguments[0],arguments[1])}function Ae({className:t,...o}){return e.jsx("div",{className:_("animate-pulse rounded-md bg-accent",t),"data-slot":"skeleton",...o})}var[R,ut]=oe("Tooltip",[q]),A=q(),W="TooltipProvider",De=700,k="tooltip.open",[Oe,I]=R(W),X=t=>{const{__scopeTooltip:o,delayDuration:r=De,skipDelayDuration:s=300,disableHoverableContent:n=!1,children:l}=t,d=c.useRef(!0),g=c.useRef(!1),i=c.useRef(0);return c.useEffect(()=>{const f=i.current;return()=>window.clearTimeout(f)},[]),e.jsx(Oe,{scope:o,isOpenDelayedRef:d,delayDuration:r,onOpen:c.useCallback(()=>{window.clearTimeout(i.current),d.current=!1},[]),onClose:c.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(()=>d.current=!0,s)},[s]),isPointerInTransitRef:g,onPointerInTransitChange:c.useCallback(f=>{g.current=f},[]),disableHoverableContent:n,children:l})};X.displayName=W;var E="Tooltip",[Se,P]=R(E),K=t=>{const{__scopeTooltip:o,children:r,open:s,defaultOpen:n,onOpenChange:l,disableHoverableContent:d,delayDuration:g}=t,i=I(E,t.__scopeTooltip),f=A(o),[u,x]=c.useState(null),v=me(),p=c.useRef(0),a=d??i.disableHoverableContent,m=g??i.delayDuration,h=c.useRef(!1),[b,j]=pe({prop:s,defaultProp:n??!1,onChange:F=>{F?(i.onOpen(),document.dispatchEvent(new CustomEvent(k))):i.onClose(),l==null||l(F)},caller:E}),N=c.useMemo(()=>b?h.current?"delayed-open":"instant-open":"closed",[b]),T=c.useCallback(()=>{window.clearTimeout(p.current),p.current=0,h.current=!1,j(!0)},[j]),C=c.useCallback(()=>{window.clearTimeout(p.current),p.current=0,j(!1)},[j]),H=c.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{h.current=!0,j(!0),p.current=0},m)},[m,j]);return c.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),e.jsx(xe,{...f,children:e.jsx(Se,{scope:o,contentId:v,open:b,stateAttribute:N,trigger:u,onTriggerChange:x,onTriggerEnter:c.useCallback(()=>{i.isOpenDelayedRef.current?H():T()},[i.isOpenDelayedRef,H,T]),onTriggerLeave:c.useCallback(()=>{a?C():(window.clearTimeout(p.current),p.current=0)},[C,a]),onOpen:T,onClose:C,disableHoverableContent:a,children:r})})};K.displayName=E;var L="TooltipTrigger",J=c.forwardRef((t,o)=>{const{__scopeTooltip:r,...s}=t,n=P(L,r),l=I(L,r),d=A(r),g=c.useRef(null),i=Y(o,g,n.onTriggerChange),f=c.useRef(!1),u=c.useRef(!1),x=c.useCallback(()=>f.current=!1,[]);return c.useEffect(()=>()=>document.removeEventListener("pointerup",x),[x]),e.jsx(he,{asChild:!0,...d,children:e.jsx(ne.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...s,ref:i,onPointerMove:w(t.onPointerMove,v=>{v.pointerType!=="touch"&&!u.current&&!l.isPointerInTransitRef.current&&(n.onTriggerEnter(),u.current=!0)}),onPointerLeave:w(t.onPointerLeave,()=>{n.onTriggerLeave(),u.current=!1}),onPointerDown:w(t.onPointerDown,()=>{n.open&&n.onClose(),f.current=!0,document.addEventListener("pointerup",x,{once:!0})}),onFocus:w(t.onFocus,()=>{f.current||n.onOpen()}),onBlur:w(t.onBlur,n.onClose),onClick:w(t.onClick,n.onClose)})})});J.displayName=L;var $="TooltipPortal",[Me,ke]=R($,{forceMount:void 0}),Q=t=>{const{__scopeTooltip:o,forceMount:r,children:s,container:n}=t,l=P($,o);return e.jsx(Me,{scope:o,forceMount:r,children:e.jsx(U,{present:r||l.open,children:e.jsx(fe,{asChild:!0,container:n,children:s})})})};Q.displayName=$;var y="TooltipContent",Z=c.forwardRef((t,o)=>{const r=ke(y,t.__scopeTooltip),{forceMount:s=r.forceMount,side:n="top",...l}=t,d=P(y,t.__scopeTooltip);return e.jsx(U,{present:s||d.open,children:d.disableHoverableContent?e.jsx(ee,{side:n,...l,ref:o}):e.jsx(Le,{side:n,...l,ref:o})})}),Le=c.forwardRef((t,o)=>{const r=P(y,t.__scopeTooltip),s=I(y,t.__scopeTooltip),n=c.useRef(null),l=Y(o,n),[d,g]=c.useState(null),{trigger:i,onClose:f}=r,u=n.current,{onPointerInTransitChange:x}=s,v=c.useCallback(()=>{g(null),x(!1)},[x]),p=c.useCallback((a,m)=>{const h=a.currentTarget,b={x:a.clientX,y:a.clientY},j=Fe(b,h.getBoundingClientRect()),N=ze(b,j),T=Be(m.getBoundingClientRect()),C=Ve([...N,...T]);g(C),x(!0)},[x]);return c.useEffect(()=>()=>v(),[v]),c.useEffect(()=>{if(i&&u){const a=h=>p(h,u),m=h=>p(h,i);return i.addEventListener("pointerleave",a),u.addEventListener("pointerleave",m),()=>{i.removeEventListener("pointerleave",a),u.removeEventListener("pointerleave",m)}}},[i,u,p,v]),c.useEffect(()=>{if(d){const a=m=>{const h=m.target,b={x:m.clientX,y:m.clientY},j=(i==null?void 0:i.contains(h))||(u==null?void 0:u.contains(h)),N=!Ge(b,d);j?v():N&&(v(),f())};return document.addEventListener("pointermove",a),()=>document.removeEventListener("pointermove",a)}},[i,u,d,f,v]),e.jsx(ee,{...t,ref:l})}),[Ie,$e]=R(E,{isInside:!1}),He=se("TooltipContent"),ee=c.forwardRef((t,o)=>{const{__scopeTooltip:r,children:s,"aria-label":n,onEscapeKeyDown:l,onPointerDownOutside:d,...g}=t,i=P(y,r),f=A(r),{onClose:u}=i;return c.useEffect(()=>(document.addEventListener(k,u),()=>document.removeEventListener(k,u)),[u]),c.useEffect(()=>{if(i.trigger){const x=v=>{const p=v.target;p!=null&&p.contains(i.trigger)&&u()};return window.addEventListener("scroll",x,{capture:!0}),()=>window.removeEventListener("scroll",x,{capture:!0})}},[i.trigger,u]),e.jsx(ve,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:x=>x.preventDefault(),onDismiss:u,children:e.jsxs(be,{"data-state":i.stateAttribute,...f,...g,ref:o,style:{...g.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(He,{children:s}),e.jsx(Ie,{scope:r,isInside:!0,children:e.jsx(je,{id:i.contentId,role:"tooltip",children:n||s})})]})})});Z.displayName=y;var te="TooltipArrow",re=c.forwardRef((t,o)=>{const{__scopeTooltip:r,...s}=t,n=A(r);return $e(te,r).isInside?null:e.jsx(ge,{...n,...s,ref:o})});re.displayName=te;function Fe(t,o){const r=Math.abs(o.top-t.y),s=Math.abs(o.bottom-t.y),n=Math.abs(o.right-t.x),l=Math.abs(o.left-t.x);switch(Math.min(r,s,n,l)){case l:return"left";case n:return"right";case r:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function ze(t,o,r=5){const s=[];switch(o){case"top":s.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":s.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":s.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":s.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return s}function Be(t){const{top:o,right:r,bottom:s,left:n}=t;return[{x:n,y:o},{x:r,y:o},{x:r,y:s},{x:n,y:s}]}function Ge(t,o){const{x:r,y:s}=t;let n=!1;for(let l=0,d=o.length-1;l<o.length;d=l++){const g=o[l],i=o[d],f=g.x,u=g.y,x=i.x,v=i.y;u>s!=v>s&&r<(x-f)*(s-u)/(v-u)+f&&(n=!n)}return n}function Ve(t){const o=t.slice();return o.sort((r,s)=>r.x<s.x?-1:r.x>s.x?1:r.y<s.y?-1:r.y>s.y?1:0),Ye(o)}function Ye(t){if(t.length<=1)return t.slice();const o=[];for(let s=0;s<t.length;s++){const n=t[s];for(;o.length>=2;){const l=o[o.length-1],d=o[o.length-2];if((l.x-d.x)*(n.y-d.y)>=(l.y-d.y)*(n.x-d.x))o.pop();else break}o.push(n)}o.pop();const r=[];for(let s=t.length-1;s>=0;s--){const n=t[s];for(;r.length>=2;){const l=r[r.length-1],d=r[r.length-2];if((l.x-d.x)*(n.y-d.y)>=(l.y-d.y)*(n.x-d.x))r.pop();else break}r.push(n)}return r.pop(),o.length===1&&r.length===1&&o[0].x===r[0].x&&o[0].y===r[0].y?o:o.concat(r)}var Ue=X,qe=K,We=J,Xe=Q,Ke=Z,Je=re;function Qe({delayDuration:t=0,...o}){return e.jsx(Ue,{"data-slot":"tooltip-provider",delayDuration:t,...o})}function Ze({...t}){return e.jsx(Qe,{children:e.jsx(qe,{"data-slot":"tooltip",...t})})}function et({...t}){return e.jsx(We,{"data-slot":"tooltip-trigger",...t})}function tt({className:t,sideOffset:o=0,children:r,...s}){return e.jsx(Xe,{children:e.jsxs(Ke,{className:_("fade-in-0 zoom-in-95 data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) animate-in text-balance rounded-md bg-muted px-3 py-1.5 text-muted-foreground text-xs data-[state=closed]:animate-out",t),"data-slot":"tooltip-content",sideOffset:o,...s,children:[r,e.jsx(Je,{className:"z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px] bg-muted fill-muted"})]})})}const mt=function(){const{user:o,subscriptions:r}=ae.useLoaderData();function s(n){switch(n){case 5:return"bg-orange-8";case 4:return"bg-orange-7";case 3:return"bg-orange-6";case 2:return"bg-orange-5";default:return"bg-orange-4"}}return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"container mx-auto flex items-center justify-end gap-2 p-4 lg:p-8",children:[e.jsx(B,{asChild:!0,variant:"outline",children:e.jsxs(z,{className:"flex gap-2",to:"/subs/add",children:[e.jsx(we,{className:"h-4 w-4"}),"Add Subscription"]})}),e.jsxs(ce,{children:[e.jsx(de,{asChild:!0,children:e.jsx(B,{size:"icon",variant:"outline",children:e.jsx(Ce,{className:"size-4"})})}),e.jsxs(ue,{align:"end",children:[e.jsx(G,{children:"Profile"}),e.jsx(G,{asChild:!0,children:e.jsx(z,{to:"/settings",children:"Settings"})})]})]})]}),e.jsx(ie,{fallback:e.jsx(Ae,{className:"container mx-auto h-64 bg-muted p-4 lg:p-8"}),promise:r,children:n=>{if(n.length===0)return e.jsx("div",{className:"container mx-auto p-4 font-mono lg:p-8",children:"You've got no subs!"});const l=n.reduce((a,m)=>a+Number.parseFloat(m.amount),0),d=Math.max(...n.map(a=>Number.parseFloat(a.amount))),g=n.reduce((a,m)=>a+m.rating,0),i=g/n.length,f=Re(n,a=>a.rating),u=l/g,x=Math.min(...n.filter(a=>Number.parseFloat(a.amount)>0).map(a=>Number.parseFloat(a.amount)/a.rating)),v=u/Math.max(u,x)*100,p=x/Math.max(u,x)*100;return e.jsxs("div",{className:"container mx-auto p-4 font-mono lg:p-8",children:[e.jsxs("div",{className:"mb-8 grid gap-2 lg:grid-cols-2",children:[e.jsx(D,{className:"rounded-sm border-muted shadow-none transition-shadow hover:shadow",children:e.jsxs(O,{children:[e.jsxs(S,{className:"text-3xl lg:text-4xl",children:["$",l.toFixed(2)]}),e.jsx(M,{children:"per month"})]})}),e.jsx(D,{className:"rounded-sm border-muted shadow-none transition-shadow hover:shadow",children:e.jsxs(O,{children:[e.jsx(S,{className:"text-3xl lg:text-4xl",children:n.length}),e.jsx(M,{children:"subscriptions"})]})})]}),e.jsxs("div",{className:"relative grid lg:grid-cols-2",children:[e.jsx("div",{className:"-left-4 -right-4 -z-10 absolute top-0 bottom-0 border-muted border-t border-b"}),e.jsx("div",{className:"-top-4 -bottom-4 -z-10 absolute right-0 left-0 border-muted border-r border-l"}),e.jsxs("div",{className:"border-muted border-b-1 p-6 transition-shadow hover:shadow lg:border-r-1",children:[e.jsx("div",{className:"mb-2 font-medium text-lg text-muted-foreground/50 uppercase transition-colors hover:text-muted-foreground",children:"/ Average Value"}),e.jsxs("div",{className:"flex gap-1",children:[[...new Array(5)].map((a,m)=>{let h=0;return m+1<=i&&(h=m<=Math.floor(i)?100:(i-Math.floor(i))*100),e.jsx("div",{className:_("h-3 flex-1 rounded",h>0?s(m+1):"bg-muted")},`average_value_${m}`)}),e.jsxs("div",{className:"ml-2 text-muted-foreground text-xs",children:[i.toFixed(2)," points"]})]})]}),e.jsxs("div",{className:"p-6 transition-shadow hover:shadow",children:[e.jsx("div",{className:"mb-2 font-medium text-lg text-muted-foreground/50 uppercase transition-colors hover:text-muted-foreground",children:"/ Cost per point"}),e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs("div",{className:"text-muted-foreground text-xs",children:["$",u.toFixed(2)]}),e.jsx("div",{className:"h-3 rounded bg-orange-8 ",style:{width:`${v}%`}})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-3 rounded bg-orange-4",style:{width:`${p}%`}}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:["$",x.toFixed(2)]})]})]}),e.jsx("div",{className:"text-center text-muted-foreground text-xs",children:"Average vs. Lowest"})]})]}),e.jsxs("div",{className:"relative grid lg:grid-cols-2",children:[e.jsx("div",{className:"-left-4 -right-4 -z-10 absolute top-0 bottom-0 border-muted border-b"}),e.jsx("div",{className:"-top-4 -bottom-4 -z-10 absolute right-0 left-0 border-muted border-r border-l"}),e.jsxs("div",{className:"border-muted border-b p-6 transition-shadow hover:shadow lg:border-r",children:[e.jsx("div",{className:"mb-2 font-medium text-lg text-muted-foreground/50 uppercase transition-colors hover:text-muted-foreground",children:"/ Subs by Rating"}),e.jsx("div",{className:"flex gap-2",children:[...new Array(5)].map((a,m)=>{var h;return e.jsxs("div",{className:"flex max-w-16 flex-auto flex-col items-center gap-1",children:[e.jsx("div",{className:"text-muted-foreground text-xs",children:m+1}),(h=f[m+1])==null?void 0:h.map(b=>e.jsxs(Ze,{children:[e.jsx(et,{asChild:!0,children:e.jsx("div",{className:`h-3 w-full rounded ${s(m+1)}`})}),e.jsxs(tt,{children:[e.jsx("p",{className:"mb-2 border-b-1 pb-1 text-foreground",children:b.name}),e.jsxs("p",{children:["$",b.amount]}),e.jsxs("p",{children:[b.rating," stars"]})]})]},b.id))]},`rating_${m}_count`)})})]}),e.jsxs("div",{className:"p-6 transition-shadow hover:shadow",children:[e.jsx("div",{className:"mb-2 font-medium text-lg text-muted-foreground/50 uppercase transition-colors hover:text-muted-foreground",children:"/ Subs by Price"}),e.jsx("table",{children:e.jsx("tbody",{children:n.map(a=>{const m=Number.parseFloat(a.amount)/d*100;return e.jsxs("tr",{children:[e.jsx("td",{align:"right",className:"whitespace-nowrap p-1 text-muted-foreground text-xs",children:a.name}),e.jsx("td",{className:"w-full p-1",children:e.jsx(Ne.div,{animate:{width:`${m}%`},className:"h-3 rounded bg-orange-8",initial:{width:0},transition:{duration:.6,ease:"easeOut",type:"spring"}})}),e.jsxs("td",{align:"right",className:"whitespace-nowrap p-1 text-muted-foreground text-xs",children:["$",a.amount]})]},a.id)})})})]})]}),e.jsxs("div",{className:"relative p-6",children:[e.jsx("div",{className:"-left-4 -right-4 -z-10 absolute top-0 bottom-0 border-muted border-b-1"}),e.jsx("div",{className:"-top-4 -bottom-4 -z-10 absolute right-0 left-0 border-muted border-r-1 border-l-1"}),e.jsx("div",{className:"mb-2 font-medium text-lg text-muted-foreground/50 uppercase transition-colors hover:text-muted-foreground",children:"/ Your Subs"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.sort((a,m)=>m.rating-a.rating).map(a=>e.jsxs(D,{className:"rounded-sm border-muted shadow-none transition-shadow hover:shadow",children:[e.jsxs(O,{children:[e.jsx(S,{className:"font-medium",children:a.name}),e.jsxs(M,{children:["$",a.amount," per month"]})]}),e.jsxs(le,{children:[e.jsx("div",{className:"flex gap-1",children:[...new Array(5)].map((m,h)=>e.jsx("div",{className:_("h-3 flex-auto rounded",h+1>a.rating?"bg-muted":s(h+1))},`${a.name}_rating_${h}`))}),e.jsxs("p",{className:"mt-2 text-right text-muted-foreground text-xs",children:[a.rating," points"]})]})]},a.id))})]})]})}})]})};export{mt as component};
